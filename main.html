<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadows of Affection: Toxic Relationship Awareness</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e6e6e6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(25, 25, 45, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            padding: 30px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
            border: 1px solid #4a4a6a;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #4a4a6a;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(255, 107, 107, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a0a0c0;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .game-area {
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .scene {
            background: rgba(35, 35, 55, 0.6);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            line-height: 1.8;
            font-size: 1.1rem;
            border-left: 4px solid #ff6b6b;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .scene::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
        }
        
        .scene-text {
            margin-bottom: 20px;
        }
        
        .character {
            font-weight: bold;
            color: #ff8e8e;
        }
        
        .player {
            color: #6bffb8;
        }
        
        .choices {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .choice-btn {
            background: rgba(65, 65, 95, 0.7);
            border: none;
            border-radius: 8px;
            padding: 16px;
            color: #e6e6e6;
            font-size: 1rem;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
            border-left: 3px solid #4a4a6a;
            position: relative;
            overflow: hidden;
        }
        
        .choice-btn:hover {
            background: rgba(85, 85, 115, 0.9);
            transform: translateY(-2px);
            border-left: 3px solid #ff6b6b;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.2);
        }
        
        .choice-btn:active {
            transform: translateY(1px);
        }
        
        .choice-btn i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding: 15px;
            background: rgba(30, 30, 50, 0.7);
            border-radius: 10px;
            font-size: 1rem;
            border: 1px solid #4a4a6a;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }
        
        .stat-value {
            font-size: 1.4rem;
            font-weight: bold;
            margin-top: 5px;
            color: #ff8e8e;
        }
        
        .stat-meter {
            width: 100%;
            height: 8px;
            background: rgba(60, 60, 80, 0.5);
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .stat-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
            border-radius: 4px;
        }
        
        .ending-screen {
            text-align: center;
            padding: 30px;
            animation: fadeIn 1s ease;
        }
        
        .ending-title {
            font-size: 2.2rem;
            color: #ff8e8e;
            margin-bottom: 25px;
            text-shadow: 0 0 15px rgba(255, 142, 142, 0.5);
        }
        
        .ending-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #ff6b6b;
        }
        
        .ending-description {
            font-size: 1.15rem;
            line-height: 1.8;
            margin-bottom: 30px;
            background: rgba(40, 40, 60, 0.6);
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #ff6b6b;
            text-align: left;
        }
        
        .ending-tag {
            display: inline-block;
            background: rgba(255, 107, 107, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            margin-top: 10px;
            font-size: 0.9rem;
            border: 1px solid #ff6b6b;
        }
        
        .restart-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            border: none;
            border-radius: 8px;
            padding: 15px 40px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
            margin-top: 20px;
        }
        
        .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.6);
        }
        
        .resources {
            margin-top: 40px;
            padding: 25px;
            background: rgba(30, 30, 50, 0.7);
            border-radius: 10px;
            border-top: 3px solid #ff6b6b;
        }
        
        .resources h2 {
            color: #ff8e8e;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .resource-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .resource-item {
            background: rgba(40, 40, 60, 0.6);
            padding: 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
        }
        
        .resource-item:hover {
            background: rgba(50, 50, 70, 0.8);
            transform: translateX(5px);
        }
        
        .resource-icon {
            font-size: 1.5rem;
            color: #ff8e8e;
            margin-right: 15px;
            min-width: 30px;
        }
        
        .resource-content h3 {
            color: #ff8e8e;
            margin-bottom: 5px;
        }
        
        .resource-content p {
            font-size: 0.95rem;
            color: #c0c0e0;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #a0a0c0;
            font-size: 0.9rem;
            padding: 20px;
            border-top: 1px solid #4a4a6a;
            width: 100%;
            max-width: 800px;
        }
        
        .heart {
            position: absolute;
            background: rgba(255, 107, 107, 0.1);
            display: block;
            pointer-events: none;
            z-index: -1;
            animation: float 15s ease-in-out infinite;
        }
        
        .heart::before,
        .heart::after {
            content: "";
            background: rgba(255, 107, 107, 0.15);
            border-radius: 50%;
            position: absolute;
        }
        
        .heart::before {
            width: 100%;
            height: 100%;
            top: -50%;
            left: 0;
        }
        
        .heart::after {
            width: 100%;
            height: 100%;
            top: 0;
            left: -50%;
        }
        
        .hidden {
            display: none;
        }
        
        .progress-container {
            width: 100%;
            height: 8px;
            background: rgba(60, 60, 80, 0.5);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }

        a:link {
            color: rgb(255, 87, 233);
            background-color: transparent;
            text-decoration: none;
            }

            a:visited {
            color: pink;
            background-color: transparent;
            text-decoration: none;
            }

            a:hover {
            color: rgb(252, 106, 192);
            background-color: transparent;
            text-decoration: underline;
            }

            a:active {
            color: rgb(235, 135, 255);
            background-color: transparent;
            text-decoration: underline;
            }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0.7; }
            50% { transform: translate(20px, -20px) rotate(10deg); opacity: 0.4; }
            100% { transform: translate(0, 0) rotate(0deg); opacity: 0.7; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .scene {
                padding: 20px;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .stat-item {
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <button onclick="window.history.back()" style="position:fixed;top:20px;left:20px;z-index:999;font-size:1.1rem;padding:8px 18px;border-radius:8px;background:#ff8e8e;color:white;border:none;cursor:pointer;">
    ← BACK
    </button>
    <div class="container">
        <header>
            <h1>Shadows of Affection</h1>
            <p class="subtitle">An interactive experience about recognizing toxic relationship patterns. Your choices will shape the story and determine your path forward.</p>
        </header>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="game-area" id="gameArea">
            <div class="scene fade-in">
                <div class="scene-text" id="sceneText">
                    <p>You've been dating Alex for six months. At first, everything felt magical - the attention, the affection, the constant texts. But lately, things have changed. Alex gets upset when you spend time with friends, questions your loyalty, and makes you feel guilty for having your own life.</p>
                    <p>Tonight, your best friend Jamie invited you to a birthday dinner. You told Alex about it earlier, and they seemed fine. But as you're getting ready, your phone buzzes...</p>
                    <p><span class="character">Alex:</span> "Are you really going to that party? I thought we were spending the night together. You always choose others over me."</p>
                </div>
                
                <div class="choices" id="choices">
                    <button class="choice-btn" data-next="apologise"><i class="fas fa-hand-holding-heart"></i> "I'm sorry, I'll cancel and come over"</button>
                    <button class="choice-btn" data-next="explain"><i class="fas fa-comment-dots"></i> "But we made plans days ago, and I really want to go"</button>
                    <button class="choice-btn" data-next="stand-ground"><i class="fas fa-shield-alt"></i> "I have a right to see my friends. I'll see you tomorrow"</button>
                </div>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <span>Self-Esteem</span>
                <div class="stat-value" id="selfEsteemStat">50%</div>
                <div class="stat-meter"><div class="stat-fill" id="selfEsteemFill" style="width: 50%"></div></div>
            </div>
            <div class="stat-item">
                <span>Relationship Health</span>
                <div class="stat-value" id="relationshipStat">40%</div>
                <div class="stat-meter"><div class="stat-fill" id="relationshipFill" style="width: 40%"></div></div>
            </div>
            <div class="stat-item">
                <span>Support System</span>
                <div class="stat-value" id="supportStat">60%</div>
                <div class="stat-meter"><div class="stat-fill" id="supportFill" style="width: 60%"></div></div>
            </div>
        </div>
        
        <div class="resources">
            <h2><i class="fas fa-hands-helping"></i> Resources & Support</h2>
            <div class="resource-list">
                <div class="resource-item">
                    <div class="resource-icon"><i class="fas fa-phone-alt"></i></div>
                    <div class="resource-content">
                        <h3>National Domestic Violence Hotline</h3>
                        <p>Call 1-800-799-SAFE (7233) or text START to 88788</p>
                    </div>
                </div>
                <div class="resource-item">
                    <div class="resource-icon"><i class="fas fa-heart"></i></div>
                    <div class="resource-content">
                        <h3>Love is Respect</h3>
                        <p>Call 1-866-331-9474 or text LOVEIS to 22522</p>
                    </div>
                </div>
                <div class="resource-item">
                    <div class="resource-icon"><i class="fas fa-globe"></i></div>
                    <div class="resource-content">
                        <h3>Helpline</h3>
                        <p>24/7 confidential support at <a href="https://thehotline.org/">thehotline.org</a></p>
                        <p></p>
                        <p>Confidential information, counselling and support service <a href="https://www.1800respect.org.au/?utm_source=Google+Hotline+DV+One+Box&utm_medium=search&utm_campaign=DV+One+Box&utm_id=GHOB&utm_term=domestic+violence">www.1800respect.org.au</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>This interactive experience is designed to raise awareness about toxic relationship patterns. If you or someone you know is in an unhealthy relationship, please reach out to the resources listed above.</p>
    </footer>

    <script>
        // Game state
        const gameState = {
            currentScene: 'start',
            selfEsteem: 50,
            relationshipHealth: 40,
            supportSystem: 60,
            progress: 0,
            endings: []
        };
        
        // Update stats display
        function updateStats() {
            document.getElementById('selfEsteemStat').textContent = `${gameState.selfEsteem}%`;
            document.getElementById('relationshipStat').textContent = `${gameState.relationshipHealth}%`;
            document.getElementById('supportStat').textContent = `${gameState.supportSystem}%`;
            
            document.getElementById('selfEsteemFill').style.width = `${gameState.selfEsteem}%`;
            document.getElementById('relationshipFill').style.width = `${gameState.relationshipHealth}%`;
            document.getElementById('supportFill').style.width = `${gameState.supportSystem}%`;
            
            document.getElementById('progressBar').style.width = `${gameState.progress}%`;
        }
        
        // Scene definitions
        const scenes = {
            start: {
                text: `<p>You've been dating Alex for six months. At first, everything felt magical - the attention, the affection, the constant texts. But lately, things have changed. Alex gets upset when you spend time with friends, questions your loyalty, and makes you feel guilty for having your own life.</p>
                       <p>Tonight, your best friend Jamie invited you to a birthday dinner. You told Alex about it earlier, and they seemed fine. But as you're getting ready, your phone buzzes...</p>
                       <p><span class="character">Alex:</span> "Are you really going to that party? I thought we were spending the night together. You always choose others over me."</p>`,
                choices: [
                    { text: '"I\'m sorry, I\'ll cancel and come over"', next: 'apologise', effect: { selfEsteem: -10, relationshipHealth: 5, supportSystem: -15 }, icon: "fas fa-hand-holding-heart" },
                    { text: '"But we made plans days ago, and I really want to go"', next: 'explain', effect: { selfEsteem: 0, relationshipHealth: -10, supportSystem: 0 }, icon: "fas fa-comment-dots" },
                    { text: '"I have a right to see my friends. I\'ll see you tomorrow"', next: 'stand-ground', effect: { selfEsteem: 5, relationshipHealth: -15, supportSystem: 5 }, icon: "fas fa-shield-alt" }
                ]
            },
            'apologise': {
                text: `<p>You text Jamie that something came up and cancel. When you arrive at Alex's place, they're affectionate at first. But when you mention feeling bad about canceling on Jamie, Alex gets defensive.</p>
                       <p><span class="character">Alex:</span> "Why are you making me feel guilty? I just wanted to spend time with you. If you'd rather be with Jamie, just say so."</p>
                       <p>You feel confused. You wanted to make Alex happy, but now you feel worse.</p>`,
                choices: [
                    { text: 'apologise again and drop the subject', next: 'apologise-again', effect: { selfEsteem: -10, relationshipHealth: 5, supportSystem: -5 }, icon: "fas fa-dove" },
                    { text: 'Express that you feel manipulated', next: 'express-feelings', effect: { selfEsteem: 5, relationshipHealth: -15, supportSystem: 0 }, icon: "fas fa-microphone" },
                    { text: 'Say you need some space and leave', next: 'take-space', effect: { selfEsteem: 10, relationshipHealth: -20, supportSystem: 5 }, icon: "fas fa-walking" }
                ]
            },
            'explain': {
                text: `<p>You explain that you committed to this event weeks ago and it's important to you. Alex responds:</p>
                       <p><span class="character">Alex:</span> "Fine, go. But don't expect me to be waiting around for you. Maybe I'll find someone who actually prioritizes me."</p>
                       <p>The message stings. You feel guilty as you head to the party. When you arrive, Jamie notices you're upset.</p>`,
                choices: [
                    { text: 'Pretend everything is fine', next: 'pretend-fine', effect: { selfEsteem: -5, relationshipHealth: 0, supportSystem: -5 }, icon: "fas fa-mask" },
                    { text: 'Confide in Jamie about what happened', next: 'confide-in-jamie', effect: { selfEsteem: 5, relationshipHealth: -5, supportSystem: 10 }, icon: "fas fa-user-friends" }
                ]
            },
            'stand-ground': {
                text: `<p>You stand your ground and go to the party. Alex bombards you with texts throughout the evening:</p>
                       <p><span class="character">Alex:</span> "Having fun without me?"<br>
                       <span class="character">Alex:</span> "Who are you talking to?"<br>
                       <span class="character">Alex:</span> "I can't believe you're ignoring me."</p>
                       <p>You're trying to enjoy yourself but feel anxious and distracted.</p>`,
                choices: [
                    { text: 'Respond to reassure Alex', next: 'reassure-alex', effect: { selfEsteem: -5, relationshipHealth: 5, supportSystem: -5 }, icon: "fas fa-comment-medical" },
                    { text: 'Silence your phone and focus on friends', next: 'silence-phone', effect: { selfEsteem: 10, relationshipHealth: -15, supportSystem: 10 }, icon: "fas fa-volume-mute" },
                    { text: 'Leave the party early to check on Alex', next: 'leave-early', effect: { selfEsteem: -10, relationshipHealth: 10, supportSystem: -10 }, icon: "fas fa-running" }
                ]
            },

            // apologise path
            'apologise-again': {
                text: `<p>You apologise and change the subject. The evening passes with tension. Over the next week, Alex becomes increasingly controlling - questioning who you talk to, what you wear, and how you spend your time. You feel like you're walking on eggshells.</p>`,
                choices: [
                    { text: 'Comply to keep the peace', next: 'ending-trapped', effect: { selfEsteem: -20, relationshipHealth: 5, supportSystem: -15 }, icon: "fas fa-lock" },
                    { text: 'Suggest couples counseling', next: 'suggest-counseling', effect: { selfEsteem: 5, relationshipHealth: -10, supportSystem: 0 }, icon: "fas fa-heartbeat" },
                    { text: 'Reach out to a trusted friend for advice', next: 'reach-out-friend', effect: { selfEsteem: 10, relationshipHealth: -10, supportSystem: 15 }, icon: "fas fa-hand-holding" }
                ]
            },
            'express-feelings': {
                text: `<p>You tell Alex that their behavior feels manipulative. Alex immediately becomes defensive:</p>
                      <p><span class="character">Alex:</span> "Manipulative? After everything I do for you? You're so ungrateful! Maybe I should just leave!"</p>
                      <p>They start packing their things dramatically while watching for your reaction.</p>`,
                choices: [
                    { text: 'Beg Alex to stay', next: 'apologise-again', effect: { selfEsteem: -15, relationshipHealth: 5, supportSystem: -10 }, icon: "fas fa-praying-hands" },
                    { text: 'Call their bluff and let them leave', next: 'ending-awakening', effect: { selfEsteem: 10, relationshipHealth: -25, supportSystem: 10 }, icon: "fas fa-door-open" }
                ]
            },
            'take-space': {
                text: `<p>You tell Alex you need space and leave. As you're driving home, your phone blows up with messages:</p>
                      <p><span class="character">Alex:</span> "You're abandoning me!"<br>
                      <span class="character">Alex:</span> "If you leave now, don't come back!"<br>
                      <span class="character">Alex:</span> "Please, I can't live without you..."</p>
                      <p>The messages alternate between angry and desperate.</p>`,
                choices: [
                    { text: 'Return to Alex to comfort them', next: 'apologise-again', effect: { selfEsteem: -10, relationshipHealth: 10, supportSystem: -10 }, icon: "fas fa-undo" },
                    { text: 'Mute notifications and take time to reflect', next: 'ending-awakening', effect: { selfEsteem: 15, relationshipHealth: -20, supportSystem: 5 }, icon: "fas fa-hourglass-half" }
                ]
            },

            // apologise again path
            'suggest-counseling': {
                text: `<p>When you suggest counseling, Alex becomes angry:</p>
                       <p><span class="character">Alex:</span> "So you think I'm the problem? Maybe we should just end this if you're so unhappy!"</p>
                       <p>You immediately backtrack, saying you didn't mean it that way. Alex calms down but makes you promise not to bring it up again.</p>`,
                choices: [
                    { text: 'Drop the issue to avoid conflict', next: 'ending-slow-erosion', effect: { selfEsteem: -15, relationshipHealth: 5, supportSystem: -10 }, icon: "fas fa-meh" },
                    { text: 'Insist that counseling is important', next: 'ending-awakening', effect: { selfEsteem: 10, relationshipHealth: -20, supportSystem: 10 }, icon: "fas fa-lightbulb" }
                ]
            },
            'reach-out-friend': {
                text: `<p>You reach out to a trusted friend, Taylor, who listens without judgment. "This sounds like emotional abuse," they say gently. "You deserve better." They share resources for local support groups.</p>
                      <p>For the first time, you consider that Alex's behavior might not be about love but control.</p>`,
                choices: [
                    { text: "Dismiss Taylor's concerns as exaggeration", next: 'ending', effect: { selfEsteem: -5, relationshipHealth: 0, supportSystem: -10 }, icon: "fas fa-times-circle" },
                    { text: 'Attend a support group meeting', next: 'ending-liberation', effect: { selfEsteem: 15, relationshipHealth: -20, supportSystem: 20 }, icon: "fas fa-hands-helping" }
                ]
            },

            // Explanation path
            'pretend-fine': {
                text: `<p>You pretend everything is fine at the party, but Jamie notices your forced smiles. Later that night, Alex shows up unannounced at your apartment:</p>
                      <p><span class="character">Alex:</span> "I knew you'd be out late! Who gave you a ride home? Were you flirting with someone?"</p>
                      <p>They search your phone without permission while you stand frozen.</p>`,
                choices: [
                    { text: 'Allow the invasion of privacy to avoid conflict', next: 'ending-trapped', effect: { selfEsteem: -20, relationshipHealth: 5, supportSystem: -15 }, icon: "fas fa-lock" },
                    { text: 'Demand your phone back and set boundaries', next: 'set-boundaries', effect: { selfEsteem: 10, relationshipHealth: -20, supportSystem: 5 }, icon: "fas fa-hand-paper" }
                ]
            },
            'confide-in-jamie': {
                text: `<p>Jamie listens carefully and says:</p>
                       <p><span class="character">Jamie:</span> "I've been worried about you. The way Alex treats you isn't right. You deserve someone who trusts you and supports your friendships."</p>
                       <p>Hearing this from a friend makes you realize how much you've been justifying Alex's behavior.</p>`,
                choices: [
                    { text: 'Defend Alex: "They just love me a lot"', next: 'defend-alex', effect: { selfEsteem: -5, relationshipHealth: 0, supportSystem: -10 }, icon: "fas fa-shield" },
                    { text: 'Acknowledge this might be unhealthy', next: 'acknowledge-problem', effect: { selfEsteem: 10, relationshipHealth: -10, supportSystem: 15 }, icon: "fas fa-brain" }
                ]
            },

            // confide-in-jamie path
            'acknowledge-problem': {
                text: `<p>You start noticing more patterns: Alex frequently criticizes your appearance, monitors your social media, and isolates you from friends. After a particularly bad fight where Alex smashed your phone, you realize this has gone too far.</p>`,
                choices: [
                    { text: 'Confront Alex about the abusive behavior', next: 'ending-confrontation', effect: { selfEsteem: 15, relationshipHealth: -30, supportSystem: 20 }, icon: "fas fa-fist-raised" },
                    { text: 'Make a safety plan to leave the relationship', next: 'ending-liberation', effect: { selfEsteem: 20, relationshipHealth: -100, supportSystem: 30 }, icon: "fas fa-door-open" }
                ]
            },
            'defend-alex': {
                text: `<p>You defend Alex to Jamie: "They just love me so much, they get jealous sometimes." Jamie looks concerned but drops the subject. The next week, Alex finds out you talked about your relationship with Jamie.</p>
                      <p><span class="character">Alex:</span> "I can't believe you're telling our private business to everyone! You've betrayed my trust!"</p>`,
                choices: [
                    { text: 'apologise and promise not to confide in friends', next: 'ending-slow-erosion', effect: { selfEsteem: -15, relationshipHealth: 5, supportSystem: -20 }, icon: "fas fa-user-lock" },
                    { text: 'Refuse to apologise for seeking support', next: 'ending-confrontation', effect: { selfEsteem: 10, relationshipHealth: -25, supportSystem: 10 }, icon: "fas fa-head-side-heart" }
                ]
            },
            'reassure-alex': {
                text: `<p>You step away from the party to reassure Alex: "I only love you, no one else matters." Alex seems temporarily satisfied, but texts constantly throughout the night:</p>
                      <p><span class="character">Alex:</span> "Send me a selfie so I know who you're with."<br>
                      <span class="character">Alex:</span> "Call me right now so I can hear the background."</p>
                      <p>Your friends notice your distraction and frustration.</p>`,
                choices: [
                    { text: "Comply with Alex's demands", next: 'apologise-again', effect: { selfEsteem: -10, relationshipHealth: 5, supportSystem: -15 }, icon: "fas fa-check-circle" },
                    { text: 'Set boundaries about constant contact', next: 'set-boundaries', effect: { selfEsteem: 5, relationshipHealth: -15, supportSystem: 5 }, icon: "fas fa-mobile-alt" }
                ]
            },

            // Standing ground path
            'silence-phone': {
                text: `<p>You silence your phone and have a great time at the party. When you check your phone later, there are 27 missed calls and dozens of angry texts. The next morning, Alex shows up at your door unannounced.</p>
                       <p><span class="character">Alex:</span> "Why didn't you answer? I was worried sick! You're so selfish!"</p>`,
                choices: [
                    { text: 'Apologise and promise to answer next time', next: 'apologise-again', effect: { selfEsteem: -15, relationshipHealth: 10, supportSystem: -10 }, icon: "fas fa-hands" },
                    { text: 'Set clear boundaries about personal space', next: 'set-boundaries', effect: { selfEsteem: 10, relationshipHealth: -20, supportSystem: 10 }, icon: "fas fa-gavel" }
                ]
            },
            'set-boundaries': {
                text: `<p>You calmly explain that showing up unannounced is unacceptable and that you need space. Alex seems to listen but tests your boundaries repeatedly over the next month.</p>`,
                choices: [
                    { text: 'Enforce boundaries consistently', next: 'ending-boundaries', effect: { selfEsteem: 15, relationshipHealth: 0, supportSystem: 10 }, icon: "fas fa-user-shield" },
                    { text: 'Give in occasionally to keep the peace', next: 'ending-uneasy-truce', effect: { selfEsteem: -5, relationshipHealth: 5, supportSystem: -5 }, icon: "fas fa-balance-scale" }
                ]
            },
            'leave-early': {
                text: `<p>You leave the party early to check on Alex. When you arrive, they're calm and watching TV. "I knew you'd come," Alex smirks. "I just needed to know you prioritize me."</p>
                      <p>They never acknowledge the emotional manipulation or your missed time with friends.</p>`,
                choices: [
                    { text: 'Accept this as normal relationship behavior', next: 'ending-slow-erosion', effect: { selfEsteem: -15, relationshipHealth: 10, supportSystem: -10 }, icon: "fas fa-heart-broken" },
                    { text: 'Confront the manipulative behavior', next: 'express-feelings', effect: { selfEsteem: 5, relationshipHealth: -15, supportSystem: 0 }, icon: "fas fa-comment-slash" }
                ]
            },
            

            // Endings
            'ending-trapped': {
                title: 'Lost in the Shadows',
                icon: 'fas fa-lock',
                text: `<p>Over time, you become increasingly isolated. You've stopped seeing friends, changed your appearance to please Alex, and constantly second-guess yourself. The relationship has consumed your identity.</p>
                       <p>One day, you look in the mirror and barely recognize yourself. You realize you've lost who you were, but the thought of leaving feels terrifying and impossible.</p>
                       <div class="ending-tag">Ending: Trapped</div>`,
                ending: true
            },
            'ending-slow-erosion': {
                title: 'Slow Erosion',
                icon: 'fas fa-hourglass-half',
                text: `<p>You learn to navigate Alex's moods by becoming smaller and quieter. You give up hobbies, distance yourself from friends, and constantly monitor your behaviour to avoid triggering Alex's anger.</p>
                       <p>Years pass in this uneasy truce. You have moments of happiness, but always with underlying tension. You've sacrificed too much of yourself to keep the relationship intact.</p>
                       <div class="ending-tag">Ending: Compromised Self</div>`,
                ending: true
            },
            'ending-awakening': {
                title: 'The Awakening',
                icon: 'fas fa-lightbulb',
                text: `<p>After insisting on counseling, Alex reluctantly agrees. In therapy, patterns of manipulation and control become undeniable. With professional guidance, you realize this relationship is harming your mental health.</p>
                       <p>You end the relationship and focus on rebuilding your life. It's challenging, but with time and support, you regain your confidence and sense of self.</p>
                       <div class="ending-tag">Ending: Self-Discovery</div>`,
                ending: true
            },
            'ending-confrontation': {
                title: 'Breaking Point',
                icon: 'fas fa-fire',
                text: `<p>When you confront Alex, the reaction is explosive. They blame you for everything, threaten self-harm, and try to manipulate you into staying. But this time, you stand firm.</p>
                       <p>The breakup is messy and painful, but you hold your ground. With Jamie's support, you block Alex on all platforms and begin the healing process.</p>
                       <div class="ending-tag">Ending: Courageous Stand</div>`,
                ending: true
            },
            'ending-liberation': {
                title: 'Path to Liberation',
                icon: 'fas fa-dove',
                text: `<p>With Jamie's help, you create a safety plan. You secretly pack essentials, find temporary housing, and document Alex's abusive behavior. When you're ready, you leave while Alex is at work.</p>
                       <p>The first months are difficult as you rebuild your life, but with therapy and support groups, you regain your independence. You eventually find healthy relationships built on mutual respect.</p>
                       <div class="ending-tag">Ending: Freedom</div>`,
                ending: true
            },
            'ending-boundaries': {
                title: 'Boundaries Respected',
                icon: 'fas fa-user-shield',
                text: `<p>Through consistent boundary enforcement, Alex begins to respect your limits. The relationship becomes healthier, though you remain vigilant. You continue nurturing friendships outside the relationship.</p>
                       <p>This path requires ongoing effort, but it shows that sometimes relationships can change when one person stops enabling toxic patterns. You've created space for mutual respect to grow.</p>
                       <div class="ending-tag">Ending: Healthy Transformation</div>`,
                ending: true
            },
            'ending-uneasy-truce': {
                title: 'Uneasy Truce',
                icon: 'fas fa-balance-scale',
                text: `<p>You establish a fragile peace by compromising on some boundaries while enforcing others. Alex's behavior improves somewhat, but the underlying control issues remain.</p>
                       <p>You maintain friendships but feel you can't be completely open with them. The relationship functions but lacks true intimacy and trust, leaving you feeling lonely even when together.</p>
                       <div class="ending-tag">Ending: Fragile Balance</div>`,
                ending: true
            }
        };
        
        // Initialize game
        function initGame() {
            updateStats();
            createHearts();
        }
        
        // Render scene
        function renderScene(sceneId) {
            const scene = scenes[sceneId];
            const gameArea = document.getElementById('gameArea');
            gameState.currentScene = sceneId;
            gameState.progress = sceneId === 'start' ? 0 : Math.min(gameState.progress + 15, 100);
            
            if (scene.ending) {
                if (!gameState.endings.includes(sceneId)) {
                    gameState.endings.push(sceneId);
                }
                
                gameArea.innerHTML = `
                    <div class="ending-screen">
                        <div class="ending-icon"><i class="${scene.icon}"></i></div>
                        <h2 class="ending-title">${scene.title}</h2>
                        <div class="ending-description">${scene.text}</div>
                        <button class="restart-btn" onclick="restartGame()"><i class="fas fa-redo"></i> Play Again</button>
                    </div>
                `;
            } else {
                let choicesHTML = '';
                scene.choices.forEach(choice => {
                    choicesHTML += `
                        <button class="choice-btn" data-next="${choice.next}">
                            <i class="${choice.icon}"></i> ${choice.text}
                        </button>
                    `;
                });
                
                gameArea.innerHTML = `
                    <div class="scene fade-in">
                        <div class="scene-text">${scene.text}</div>
                        <div class="choices">${choicesHTML}</div>
                    </div>
                `;
                
                // Add event listeners to new choice buttons
                document.querySelectorAll('.choice-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const nextScene = this.getAttribute('data-next');
                        const choiceEffect = scene.choices.find(c => c.next === nextScene)?.effect;
                        
                        if (choiceEffect) {
                            gameState.selfEsteem = Math.max(0, Math.min(100, gameState.selfEsteem + choiceEffect.selfEsteem));
                            gameState.relationshipHealth = Math.max(0, Math.min(100, gameState.relationshipHealth + choiceEffect.relationshipHealth));
                            gameState.supportSystem = Math.max(0, Math.min(100, gameState.supportSystem + choiceEffect.supportSystem));
                            updateStats();
                        }
                        
                        renderScene(nextScene);
                    });
                });
            }
            
            updateStats();
        }
        
        // Restart game
        function restartGame() {
            gameState.selfEsteem = 50;
            gameState.relationshipHealth = 40;
            gameState.supportSystem = 60;
            gameState.progress = 0;
            renderScene('start');
        }
        
        // Create decorative hearts
        function createHearts() {
            const body = document.querySelector('body');
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                
                const size = Math.random() * 30 + 10;
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                const duration = Math.random() * 10 + 15;
                const delay = Math.random() * 5;
                const opacity = Math.random() * 0.3 + 0.1;
                
                heart.style.width = `${size}px`;
                heart.style.height = `${size}px`;
                heart.style.left = `${posX}%`;
                heart.style.top = `${posY}%`;
                heart.style.opacity = opacity;
                heart.style.animationDuration = `${duration}s`;
                heart.style.animationDelay = `${delay}s`;
                
                body.appendChild(heart);
            }
        }
        
        // Initialize the game when page loads
        window.onload = function() {
            initGame();
            renderScene('start');
        };
    </script>
</body>
</html>